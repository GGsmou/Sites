<!DOCTYPE html>
<html lang="ru">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>RegTest</title>
	<link rel="shortcut icon" href="logo.png" type="image/png">
	<link rel="stylesheet" href="style.css">
	<script src="https://cdn.jsdelivr.net/npm/brython@3/brython.min.js"></script>
	<script src="https://cdn.jsdelivr.net/npm/brython@3/brython_stdlib.js"></script>
</head>
<body onload="brython()">
	<script type="text/python">
	from browser import ajax, document
	from browser.widgets.dialog import InfoDialog
	from browser import alert
	from browser.local_storage import storage
	import json
	import time

	def reg(ev):
		log = document['log'].value
		pas = document['pass'].value
		document['output'].text = log + '\n' + pas

		load = {'log':log,'pass':pas}

		storage["log_pass"] = json.dumps(load)

		unload = json.loads(storage['log_pass'])
		alert(unload['log'])
		alert(unload['pass'])
		alert(unload)

		def on_complete(req):
		    if req.status==200 or req.status==0:
		        document["output"].text = req.text
		    else:
		        document["output"].text = "error "+req.text

		def err_msg():
		    document["output"].text = "server didn't reply after %s seconds" %timeout

		timeout = 4

		def go(url):
		    req = ajax.Ajax()
		    req.bind("complete", on_complete)
		    req.set_timeout(timeout,err_msg)
		    req.open('GET',url,True)
		    req.send()

		go('https://chsw.pp.ua/regtest/logpass.txt?foo=%s' %time.time())

	document["reg"].bind("click", reg)

	def login(ev):
		def on_complete(req):
		   if req.status == 200 or req.status == 0:
		       document["result"].html = req.text
		   else:
		       document["result"].html = "error " + req.text

		req = ajax.Ajax()
		req.bind('complete', on_complete)
		# send a POST request to the url
		req.open('POST', url, True)
		req.set_header('content-type', 'application/x-www-form-urlencoded')
		# send data as a dictionary
		req.send({'x': 0, 'y': 1})

	document["login"].bind("click", login)

	def uploadfiles(ev):
	    for f in document["choosefiles"].files:
	        ajax.file_upload("/cgi-bin/savefile.py", f)
	document["upload"].bind("click", uploadfiles)

	</script>

	<div class="topleft">
		<p>RegTest</p>
	</div>
  	<div class="middle">
	    <input id="log" placeholder="Логин"><br>
	    <input id="pass" placeholder="Пароль"><br>
		<button id="login">Войти</button><br>
		<button id="reg">Зарегестрироваться</button><br>
		<p id="output">Деньги</p>
		<button onclick="copyElementText()">Скопировать</button>
		<script>
			function copyElementText() {
			    var text = document.getElementById("output").innerText;
			    var elem = document.createElement("textarea");
			    document.body.appendChild(elem);
			    elem.value = text;
			    elem.select();
			    document.execCommand("copy");
			    document.body.removeChild(elem);
			}
		</script>
		<form>
    <input id="choosefiles" type="file" multiple="multiple" />
</form>
<button id="upload">Upload</button>
  	</div>
  	<div class="bottomleft">
    	<p>By GGsmou</p>
  	</div>
</body>
</html>
</html>